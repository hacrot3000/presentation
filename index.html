<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="appTitle">Ứng dụng Trình diễn</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Thanh chuyển trang (trên cùng) -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <div class="d-flex gap-2">
                <button class="btn btn-outline-light" id="btnPrev">
                    <i class="fas fa-chevron-left"></i> <span data-i18n="prev">Prev</span>
                </button>
                <button class="btn btn-outline-light" id="btnNext">
                    <span data-i18n="next">Next</span> <i class="fas fa-chevron-right"></i>
                </button>
                <button class="btn btn-primary" id="btnAddPage">
                    <i class="fas fa-plus"></i> <span data-i18n="addPage">Thêm trang mới</span>
                </button>
                <span class="navbar-text ms-3" id="pageInfo">
                    <span data-i18n="page">Trang</span> 1 / 1
                </span>
            </div>
            <div class="d-flex gap-2">
                <button class="btn btn-warning" id="btnImportState">
                    <i class="fas fa-upload"></i> <span data-i18n="importState">Import</span>
                </button>
                <button class="btn btn-success" id="btnSaveState">
                    <i class="fas fa-save"></i> <span data-i18n="saveState">Lưu trạng thái</span>
                </button>
                <button class="btn btn-info" id="btnScriptEditor">
                    <i class="fas fa-code"></i> <span data-i18n="scriptEditor">Script Editor</span>
                </button>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-light btn-sm" id="btnLangVI" data-lang="vi">
                        <i class="fas fa-language"></i> VI
                    </button>
                    <button type="button" class="btn btn-outline-light btn-sm" id="btnLangEN" data-lang="en">
                        <i class="fas fa-language"></i> EN
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid p-0 d-flex" style="height: calc(100vh - 56px);">
        <!-- Sidebar bên trái -->
        <div class="sidebar bg-light border-end" id="sidebar">
            <h5 class="p-3 border-bottom" data-i18n="addObject">Thêm Object</h5>
            <div class="list-group list-group-flush">
                <a href="#" class="list-group-item list-group-item-action" data-type="text">
                    <i class="fas fa-font me-2"></i> <span data-i18n="text">Text</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="image">
                    <i class="fas fa-image me-2"></i> <span data-i18n="image">Image</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="icon">
                    <i class="fas fa-icons me-2"></i> <span data-i18n="icon">Icon</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="button">
                    <i class="fas fa-hand-pointer me-2"></i> <span data-i18n="button">Button</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="checkbox">
                    <i class="fas fa-check-square me-2"></i> <span data-i18n="checkbox">Checkbox</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="dropdown">
                    <i class="fas fa-list me-2"></i> <span data-i18n="dropdown">Dropdown</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="toggle">
                    <i class="fas fa-toggle-on me-2"></i> <span data-i18n="toggle">Toggle Button</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="toggle3state">
                    <i class="fas fa-toggle-on me-2"></i> <span data-i18n="toggle3state">3 state Toggle</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="rectangle">
                    <i class="fas fa-square me-2"></i> <span data-i18n="rectangle">Hình chữ nhật</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="circle">
                    <i class="fas fa-circle me-2"></i> <span data-i18n="circle">Hình tròn</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action" data-type="ellipse">
                    <i class="fa-regular fa-circle me-2"></i> <span data-i18n="ellipse">Hình elip</span>
                </a>
            </div>
        </div>

        <!-- Canvas bên phải -->
        <div class="canvas-container flex-grow-1 position-relative" id="canvasContainer">
            <div class="canvas bg-white" id="canvas"></div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu" style="display: none;">
        <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action" data-action="edit"><span data-i18n="edit">Chỉnh sửa</span></a>
            <a href="#" class="list-group-item list-group-item-action" data-action="delete"><span data-i18n="delete">Xóa</span></a>
            <a href="#" class="list-group-item list-group-item-action" data-action="bringToFront"><span data-i18n="bringToFront">Bring to Front</span></a>
            <a href="#" class="list-group-item list-group-item-action" data-action="sendToBack"><span data-i18n="sendToBack">Send to Back</span></a>
            <a href="#" class="list-group-item list-group-item-action" data-action="toggleDraggable"><span data-i18n="toggleDraggable">Toggle Draggable</span></a>
        </div>
    </div>

    <!-- Modal Edit Object -->
    <div class="modal fade" id="editObjectModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="editObject">Chỉnh sửa Object</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="editObjectForm">
                    <!-- Form sẽ được tạo động -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Đóng</button>
                    <button type="button" class="btn btn-primary" id="btnSaveObject" data-i18n="save">Lưu</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Script Editor -->
    <div class="modal fade" id="scriptEditorModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="scriptEditorTitle">Script Editor</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <button class="btn btn-sm btn-primary" id="btnAddAction">
                            <i class="fas fa-plus"></i> <span data-i18n="addAction">Thêm Action</span>
                        </button>
                    </div>
                    <textarea class="form-control font-monospace" id="scriptTextarea" rows="15" style="font-size: 12px;"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Đóng</button>
                    <button type="button" class="btn btn-primary" id="btnSaveScript" data-i18n="saveScript">Lưu Script</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Add Action -->
    <div class="modal fade" id="addActionModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="addActionTitle">Thêm Action</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label" data-i18n="actionType">Loại Action</label>
                        <select class="form-select" id="actionType">
                            <option value="show" data-i18n="show">Show</option>
                            <option value="hide" data-i18n="hide">Hide</option>
                            <option value="move" data-i18n="move">Move</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" data-i18n="target">Target (Object ID, cách nhau bằng dấu phẩy cho show/hide)</label>
                        <input type="text" class="form-control" id="actionTarget">
                    </div>
                    <div class="mb-3" id="moveParams" style="display: none;">
                        <label class="form-label" data-i18n="x">X</label>
                        <input type="number" class="form-control" id="actionX">
                        <label class="form-label mt-2" data-i18n="y">Y</label>
                        <input type="number" class="form-control" id="actionY">
                        <label class="form-label mt-2" data-i18n="time">Time (ms)</label>
                        <input type="number" class="form-control" id="actionTime" value="2000">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Đóng</button>
                    <button type="button" class="btn btn-primary" id="btnAddActionConfirm" data-i18n="add">Thêm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Save State -->
    <div class="modal fade" id="saveStateModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="saveStateTitle">Lưu trạng thái</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <textarea class="form-control font-monospace" id="saveStateTextarea" rows="20" style="font-size: 12px;" readonly></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Đóng</button>
                    <button type="button" class="btn btn-primary" id="btnDownloadJSON" data-i18n="downloadJSON">Tải xuống file JSON</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Edit Background -->
    <div class="modal fade" id="editBackgroundModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="editBackgroundTitle">Chỉnh sửa Background</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label" data-i18n="backgroundColor">Màu nền</label>
                        <input type="color" class="form-control form-control-color" id="editBackgroundColor" value="#f5f5f5">
                    </div>
                    <div class="mb-3">
                        <label class="form-label" data-i18n="backgroundImageUrl">Hình nền (URL)</label>
                        <input type="text" class="form-control" id="editBackgroundImageUrl" placeholder="https://example.com/image.jpg">
                        <small class="form-text text-muted" data-i18n="backgroundImageUrlHint">Để trống nếu không muốn dùng hình nền</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" data-i18n="backgroundRepeat">Lặp lại hình nền</label>
                        <select class="form-select" id="editBackgroundRepeat">
                            <option value="no-repeat" data-i18n="noRepeat">Không lặp</option>
                            <option value="repeat" data-i18n="repeat">Lặp lại</option>
                            <option value="repeat-x" data-i18n="repeatX">Lặp theo chiều ngang</option>
                            <option value="repeat-y" data-i18n="repeatY">Lặp theo chiều dọc</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" data-i18n="backgroundSize">Kích thước hình nền</label>
                        <select class="form-select" id="editBackgroundSize">
                            <option value="cover" data-i18n="cover">Cover (phủ toàn bộ)</option>
                            <option value="contain" data-i18n="contain">Contain (giữ nguyên tỷ lệ)</option>
                            <option value="auto" data-i18n="auto">Auto (kích thước gốc)</option>
                            <option value="100% 100%" data-i18n="stretch">100% x 100% (kéo dãn)</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Đóng</button>
                    <button type="button" class="btn btn-primary" id="btnSaveBackground" data-i18n="save">Lưu</button>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Config -->
    <script src="conf/config.js"></script>

    <!-- Core Modules -->
    <script src="js/language.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/objectManager.js"></script>
    <script src="js/dragDrop.js"></script>
    <script src="js/contextMenu.js"></script>
    <script src="js/scriptRunner.js"></script>
    <script src="js/pageManager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
